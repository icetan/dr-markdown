!function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(require,module,exports){var addStyle,noise;noise=require("../lib/noise");addStyle=function(css){var style;style=document.createElement("style");style.type="text/css";style.innerHTML=css;return document.getElementsByTagName("head")[0].appendChild(style)};addStyle(".noise { background-image: url("+noise(128,128,[0,0,0,0],[0,0,0,8])+"); }")},{"../lib/noise":9}],2:[function(require,module,exports){var correctionTimer,docTitle,editor,extend,extendA,index,initiated,marked,model,nextSlide,number,prevSlide,proxy,restore,save,saveTimer,saved,setViewHtml,state,state_,toc,tocEl,updateIndex,updateThemes,updateTitle,updateToc,updateView,viewEl,viewWrapEl,vixen,_ref;require("./bring-the-noise.coffee");vixen=require("vixen");marked=require("marked");marked.setOptions({gfm:true,tables:true,breaks:false,smartLists:true});require("./unify.coffee");state_=require("./state.coffee");require("./state-gist.coffee");_ref=require("./utils.coffee"),number=_ref.number,index=_ref.index,toc=_ref.toc;extend=function(r,d){var k,v;if(r==null){r={}}for(k in d){v=d[k];if(v!=null){r[k]=v}}return r};extendA=function(r,a){var k,v,_i,_len,_ref1;if(r==null){r={}}for(_i=0,_len=a.length;_i<_len;_i++){_ref1=a[_i],k=_ref1[0],v=_ref1[1];if(v!=null){r[k]=v}}return r};proxy=function(dict){var def_,fn,prop,vault_;vault_={};def_=function(prop,fn){return{enumerable:true,set:function(value){var old;old=vault_[prop];vault_[prop]=value;return fn(value,old)},get:function(){return vault_[prop]}}};return Object.create(Object.prototype,extendA({toJSON:{value:function(){return vault_}}},function(){var _results;_results=[];for(prop in dict){fn=dict[prop];_results.push([prop,def_(prop,fn)])}return _results}()))};tocEl=document.getElementById("toc");viewEl=document.getElementById("view");viewWrapEl=document.getElementById("view-wrap");updateToc=function(){return tocEl.innerHTML=toc(viewEl)};updateIndex=function(){return index(number(viewEl))};state=proxy({toc:function(to){if(to){updateToc()}return model.showToc=to?"toc":""},index:function(to){if(to){if(document.querySelectorAll("#view [data-number]").length===0){updateIndex();if(state.toc){updateToc()}}return model.showIndex="indexed"}else{return model.showIndex=""}},mode:function(mode,old){model.mode={write:"full-input",read:"full-view",present:"present"}[mode]||"";if(mode==="read"||mode==="present"){editor.setOption("readOnly","nocursor");return updateView()}else if(mode==="write"||mode===""){editor.setOption("readOnly",false);editor.focus();if(mode===""){return updateView(true)}}},slide:function(nr){return updateView()},theme:function(v){model.theme=v;return updateThemes()}});docTitle=function(){var h,tmp;tmp=document.createElement("div");tmp.innerHTML=(h=viewEl.querySelectorAll("h1,h2,h3")[0])?h.innerHTML:"Untitled";[].forEach.call(tmp.querySelectorAll(".index"),function(el){return tmp.removeChild(el)});return tmp.textContent};initiated=false;saved=true;save=function(force){if(!saved||force){return state_.store({text:editor.getValue(),meta:extend(state,{title:docTitle(),autosave:!force})},function(err,id){saved=err==null;return updateTitle()})}};setViewHtml=function(html){viewEl.innerHTML=html;if(state.index){updateIndex()}if(state.toc){return updateToc()}};updateView=function(force){var cline,cursorHeight,cursorSpan,cursorTop,md,scrollTop,viewHeight,_ref1;switch(false){case!(force||(_ref1=state.mode)==="read"||_ref1==="write"):return setViewHtml(marked(editor.getValue()));case state.mode!=="present":md=editor.getValue().split(/\n\s*\n\s*(?:[-*]\s*){3,}\n/);if(state.slide<md.length){return setViewHtml(marked(md[state.slide||0]))}else{return state.slide=md.length-1}break;default:cline=editor.getCursor().line;md=editor.getValue().split("\n");md[cline]+='<span id="cursor"></span>';md=md.join("\n");setViewHtml(marked(md));scrollTop=viewWrapEl.scrollTop;viewHeight=viewWrapEl.offsetHeight;cursorSpan=document.getElementById("cursor");cursorTop=cursorSpan.offsetTop;cursorHeight=cursorSpan.offsetHeight;if(cursorTop<scrollTop||cursorTop>scrollTop+viewHeight-cursorHeight){return viewWrapEl.scrollTop=cursorTop-viewHeight/2}}};updateTitle=function(){return document.title=(saved?"":"*")+docTitle()};updateThemes=function(){return model.themes=["serif","cv"].map(function(name){return{name:name,active:state.theme===name,click:function(){return state.theme=name}}})};nextSlide=function(){return state.slide=(state.slide||0)+1};prevSlide=function(){return state.slide=Math.max((state.slide||0)-1,0)};correctionTimer=null;saveTimer=null;editor=CodeMirror.fromTextArea(document.getElementById("input-md"),{mode:"gfm",theme:"default",lineNumbers:false,lineWrapping:true,dragDrop:false,autofocus:true});editor.on("change",function(){updateView();if(initiated){if(saved){saved=false;updateTitle()}clearTimeout(correctionTimer);correctionTimer=setTimeout(function(){return updateView(true)},1e3);clearTimeout(saveTimer);return saveTimer=setTimeout(save,5e3)}else{return updateTitle()}});restore=function(data){var currentText,meta,text;currentText=editor.getValue();if(data){text=data.text,meta=data.meta;extend(state,extend({theme:"serif"},meta||{}));if(text!=null&&text!==currentText){editor.setValue(text)}}else{state.theme="serif";if(currentText){save(true)}}return initiated=true};model={show:function(v){if(v){return""}else{return"hide"}},hide:function(v){if(v){return"hide"}else{return""}},noop:function(e){e.preventDefault();return false},stop:function(e){e.stopPropagation();return false},drop:function(e){var reader;reader=new FileReader;reader.onload=function(e){initiated=true;return editor.setValue(e.target.result)};return reader.readAsText(e.dataTransfer.files[0])},settings:function(){return model.showSettings=true},stores:Object.keys(state_.stores).map(function(key){return{name:key,click:function(){state_.serialize({type:key});return save(true)}}}),showSettings:false,print:function(){return window.print()},mode:"",toggleToc:function(){return state.toc=!state.toc},toggleIndex:function(){return state.index=!state.index},gotoPresent:function(){return state.mode="present"},expandInput:function(){return state.mode=state.mode?"":"write"},expandView:function(){return state.mode=state.mode?"":"read"},closePopups:function(){model.showSettings=false;if(state.mode==="present"){return nextSlide()}},mouseout:function(e){var from;from=e.relatedTarget||e.toElement;if(!from||from.nodeName==="HTML"){return save()}},hotkeyCombo:function(e){var hit;hit=void 0;if(e.ctrlKey){if(e.altKey){hit=function(){switch(e.keyCode){case 26:state.mode="present";return true;case 24:state.mode="write";return true;case 3:state.mode="";return true;case 22:state.mode="read";return true;case 19:save(true);return true}}()}}if(hit){return e.preventDefault()}},hotkey:function(e){var hit;hit=void 0;if(state.mode==="present"){hit=function(){switch(e.keyCode){case 32:case 39:nextSlide();return true;case 37:prevSlide();return true;case 27:state.mode="";return true}}()}if(hit){return e.preventDefault()}}};state_.restore(function(err,data){return restore(data)});vixen(document.body.parentNode,model);window.onbeforeunload=function(){if(!saved){return"You have unsaved changes."}}},{"./bring-the-noise.coffee":1,"./state-gist.coffee":3,"./state.coffee":4,"./unify.coffee":5,"./utils.coffee":6,marked:10,vixen:11}],3:[function(require,module,exports){var state,xhr;xhr=require("./xhr.coffee");state=require("./state.coffee");state.stores.gist={store:function(info,data,callback){if(data.meta.autosave){return callback("Auto save not supported.")}return xhr.json({method:"POST",url:"https://api.github.com/gists",data:{description:"Created with Dr. Markdown",files:{"document.md":{content:data.text},"meta.json":{content:JSON.stringify(data.meta)}}}},function(err,data){return callback(err,{id:data.id})})},restore:function(info,callback){if(info.id==null){return callback()}return xhr.json({url:"https://api.github.com/gists/"+info.id},function(err,data){var meta,text,_ref,_ref1,_ref2;_ref=data.files,_ref1=_ref["document.md"],text=_ref1.content,_ref2=_ref["meta.json"],meta=_ref2.content;return callback(err,{text:text,meta:JSON.parse(meta)})})}}},{"./state.coffee":4,"./xhr.coffee":7}],4:[function(require,module,exports){var base64,buildQuery,deserialize,extend,pad,parseQuery,rnd,serialize,state,toDict;base64=require("../lib/base64");pad=function(n,p){return new Array(p+1-n.toString().length).join("0")+n};rnd=function(){return Date.now().toString(16)+pad((Math.random()*65536|0).toString(16),4)};extend=function(r,d){var k,v;if(r==null){r={}}for(k in d){v=d[k];if(v!=null){r[k]=v}}return r};toDict=function(array,dict){var kvp,_i,_len;if(dict==null){dict={}}for(_i=0,_len=array.length;_i<_len;_i++){kvp=array[_i];dict[kvp[0]]=kvp[1]}return dict};parseQuery=function(s){var kvp;return toDict(function(){var _i,_len,_ref,_results;_ref=s.replace(/^\?/,"").split("&");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){kvp=_ref[_i];_results.push(kvp.split("="))}return _results}())};buildQuery=function(q){var k,v;return function(){var _results;_results=[];for(k in q){v=q[k];if(k!=="_hash"){_results.push(k+"="+encodeURIComponent(v))}}return _results}().join("&")+(q._hash?"#"+q._hash:"")};deserialize=function(){return extend(extend({type:"base64"},parseQuery(window.location.search)),{_hash:window.location.hash.substr(1)||void 0})};serialize=function(info){history.replaceState({},null,"?"+buildQuery(info));return info};module.exports=state={store:function(data,callback){var info;info=deserialize();return state.stores[info.type].store(info,data,function(err,info_){if(err!=null){return typeof callback==="function"?callback(err):void 0}info_=serialize(extend({type:info.type},info_||{}));return typeof callback==="function"?callback(null,info_):void 0})},restore:function(callback){var info;info=deserialize();return state.stores[info.type].restore(info,function(err,data){return callback(err,data||{})})},stores:{base64:{store:function(info,data,callback){return callback(null,{_hash:base64.encode(JSON.stringify(data||"{}")).replace(/\=+$/,"")})},restore:function(info,callback){return callback(null,JSON.parse(base64.decode(info._hash||"")||"{}"))}},local:{store:function(info,data,callback){if(info.id==null){info.id=rnd()}window.localStorage.setItem("markdown-"+info.id,JSON.stringify(data||"{}"));return callback(null,info)},restore:function(info,callback){return callback(null,JSON.parse(window.localStorage.getItem("markdown-"+info.id)||"{}"))}},file:{store:function(info,data,callback){if(data.meta.autosave){return callback("Auto save not supported.")}saveAs(new Blob([data.text],{type:"text/plain;charset=utf-8"}),data.meta.title+".md");return callback()},restore:function(info,callback){return callback()}}},deserialize:deserialize,serialize:serialize}},{"../lib/base64":8}],5:[function(require,module,exports){var map,unify;map={"<=":"⟸","=>":"⟹","<=>":"⟺","<-":"⟵","->":"⟶","<->":"⟷","...":"…","--":"–","---":"—","^1":"¹","^2":"²","^3":"³","1/2":"½","1/4":"¼","3/4":"¾"};unify=function(cm){var m,pos,token;pos=cm.getCursor();m=/[^\s]+$/.exec(cm.getRange({line:pos.line,ch:0},pos));token=m!=null?m[0]:void 0;if(token!=null&&map[token]!=null){return cm.replaceRange(map[token],{line:pos.line,ch:pos.ch-token.length},pos)}};CodeMirror.commands["unify"]=unify;CodeMirror.keyMap["default"]["Ctrl-Space"]="unify"},{}],6:[function(require,module,exports){var slug;slug=function(str){return str.trim().replace(/\s+/g,"-").toLowerCase()};module.exports={getCursorPosition:function(el){var Sel,SelLength,pos;pos=0;if(document.selection){el.focus();Sel=document.selection.createRange();SelLength=document.selection.createRange().text.length;Sel.moveStart("character",-el.value.length);pos=Sel.text.length-SelLength}else if(el.selectionStart||el.selectionStart===0){pos=el.selectionStart}return pos},number:function(el){var count,elems,h,i,map,n,num,order,reset,sel,selector,t,_i,_j,_k,_len,_len1,_len2,_ref,_ref1;selector="H1,H2,H3,H4,H5,H6";elems=[];order=selector.split(",");map={};for(i=_i=0,_len=order.length;_i<_len;i=++_i){sel=order[i];map[sel]={c:0,pos:i}}num=function(tag){var c,t;return function(){var _j,_ref,_results;_results=[];for(i=_j=0,_ref=map[tag].pos;0<=_ref?_j<=_ref:_j>=_ref;i=0<=_ref?++_j:--_j){if((c=map[t=order[i]].c)!==0&&t!=="OL"&&t!=="UL"){_results.push(c)}}return _results}().join(",")};count=function(sel){var e,_j,_ref,_ref1,_results;e=map[sel];e.c++;_results=[];for(i=_j=_ref=e.pos+1,_ref1=order.length;_ref<=_ref1?_j<_ref1:_j>_ref1;i=_ref<=_ref1?++_j:--_j){_results.push(map[order[i]].c=0)}return _results};reset=function(clear){var obj,_results;if(clear){elems=[]}_results=[];for(sel in map){obj=map[sel];_results.push(obj.c=0)}return _results};_ref=el.querySelectorAll("[data-number-reset],[data-number-clear],"+selector);for(i=_j=0,_len1=_ref.length;_j<_len1;i=++_j){h=_ref[i];if(h.hasAttribute("data-number-reset")){reset()}else if(h.hasAttribute("data-number-clear")){reset(true)}else{t=h.tagName;count(t);if(t!=="OL"&&t!=="UL"){elems.push([h,num(t)])}}}for(_k=0,_len2=elems.length;_k<_len2;_k++){_ref1=elems[_k],h=_ref1[0],n=_ref1[1];h.setAttribute("data-number",n)}return el},index:function(el){var e,_i,_len,_ref;_ref=el.querySelectorAll("[data-number]");for(_i=0,_len=_ref.length;_i<_len;_i++){e=_ref[_i];e.innerHTML='<span class="index">\n'+e.getAttribute("data-number").split(",").join(". ")+".\n</span>"+e.innerHTML}return el},slug:slug,toc:function(el){var e;return"<ul>"+function(){var _i,_len,_ref,_results;_ref=el.querySelectorAll("H1,H2,H3,H4,H5,H6");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){e=_ref[_i];e.id=slug(e.textContent);_results.push('<li><a href="#'+e.id+'"><'+e.tagName+">\n"+e.innerHTML+"\n</"+e.tagName+"></a></li>")}return _results}().join("")+"</ul>"}}},{}],7:[function(require,module,exports){var xhr;xhr=function(opt,callback){var header,method,r,value,_ref;method=opt.method||"GET";r=new XMLHttpRequest;if("withCredentials"in r){r.open(method,opt.url,true)}else if(typeof XDomainRequest!=="undefined"&&XDomainRequest!==null){r=new XDomainRequest;r.open(method,opt.url)}else{return null}r.onreadystatechange=function(){if(r.readyState===4){if(r.status>=200&&r.status<300){return callback(void 0,r.responseText,r)}else{return callback(r.statusText,r.responseText,r)}}};_ref=opt.headers;for(header in _ref){value=_ref[header];r.setRequestHeader(header,value)}r.send(opt.data);return r};xhr.json=function(opt,callback){var callback_;callback_=function(err,json,xhr){var data,err_;if(err!=null||!json){return callback(err,void 0,xhr)}try{data=JSON.parse(json)}catch(_error){err_=_error;err=err_}return callback(err,data,xhr)};opt.data=JSON.stringify(opt.data);opt.headers={"Content-Type":"application/json"};return xhr(opt,callback_)};module.exports=xhr},{}],8:[function(require,module,exports){var base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return output},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");input+=new Array(5-(input.length%4||4)).join("=");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}}output=base64._utf8_decode(output);return output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}};module.exports=base64},{}],9:[function(require,module,exports){var BYTE4=4294967296;module.exports=function(w,h,min,span){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),i,j,imageData,rnd;if(!(min instanceof Array))min=[min,min,min,255];else for(;min.length<4;min.push(min.length===3?255:min[min.length-1]));if(!(span instanceof Array))span=[span,span,span,255];else for(;span.length<4;span.push(span.length===3?255:span[span.length-1]));canvas.width=w;canvas.height=h;imageData=ctx.createImageData(canvas.width,canvas.height);for(i=imageData.data.length;(i-=4)>=0;){rnd=Math.random()*BYTE4;for(j=0;j<4;j++)imageData.data[i+j]=span[j]?((rnd>>j*8&255)/255*span[j]|0)+min[j]:min[j]}ctx.putImageData(imageData,0,0);return canvas.toDataURL()}},{}],10:[function(require,module,exports){!function(global){!function(){var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};block.bullet=/(?:[*+-]|\d+\.)/;block.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;block.item=replace(block.item,"gm")(/bull/g,block.bullet)();block.list=replace(block.list)(/bull/g,block.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)();block._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b";block.html=replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)();block.paragraph=replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)();block.normal=merge({},block);block.gfm=merge({},block.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/});block.gfm.paragraph=replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|")();block.tables=merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function Lexer(options){this.tokens=[];this.tokens.links={};this.options=options||marked.defaults;this.rules=block.normal;if(this.options.gfm){if(this.options.tables){this.rules=block.tables}else{this.rules=block.gfm}}}Lexer.rules=block;Lexer.lex=function(src,options){var lexer=new Lexer(options);return lexer.lex(src)};Lexer.prototype.lex=function(src){src=src.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(src,true)};Lexer.prototype.token=function(src,top){var src=src.replace(/^ +$/gm,""),next,loose,cap,bull,b,item,space,i,l;while(src){if(cap=this.rules.newline.exec(src)){src=src.substring(cap[0].length);if(cap[0].length>1){this.tokens.push({type:"space"})}}if(cap=this.rules.code.exec(src)){src=src.substring(cap[0].length);cap=cap[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?cap.replace(/\n+$/,""):cap});continue}if(cap=this.rules.fences.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"code",lang:cap[2],text:cap[3]});continue}if(cap=this.rules.heading.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"heading",depth:cap[1].length,text:cap[2]});continue}if(top&&(cap=this.rules.nptable.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].split(/ *\| */)}this.tokens.push(item);continue}if(cap=this.rules.lheading.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"heading",depth:cap[2]==="="?1:2,text:cap[1]});continue}if(cap=this.rules.hr.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"hr"});continue}if(cap=this.rules.blockquote.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"blockquote_start"});cap=cap[0].replace(/^ *> ?/gm,"");this.token(cap,top);this.tokens.push({type:"blockquote_end"});continue}if(cap=this.rules.list.exec(src)){src=src.substring(cap[0].length);bull=cap[2];this.tokens.push({type:"list_start",ordered:bull.length>1});cap=cap[0].match(this.rules.item);next=false;l=cap.length;i=0;for(;i<l;i++){item=cap[i];space=item.length;item=item.replace(/^ *([*+-]|\d+\.) +/,"");if(~item.indexOf("\n ")){space-=item.length;item=!this.options.pedantic?item.replace(new RegExp("^ {1,"+space+"}","gm"),""):item.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&i!==l-1){b=block.bullet.exec(cap[i+1])[0];if(bull!==b&&!(bull.length>1&&b.length>1)){src=cap.slice(i+1).join("\n")+src;i=l-1}}loose=next||/\n\n(?!\s*$)/.test(item);if(i!==l-1){next=item[item.length-1]==="\n";if(!loose)loose=next}this.tokens.push({type:loose?"loose_item_start":"list_item_start"});this.token(item,false);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(cap=this.rules.html.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:cap[1]==="pre"||cap[1]==="script",text:cap[0]});continue}if(top&&(cap=this.rules.def.exec(src))){src=src.substring(cap[0].length);this.tokens.links[cap[1].toLowerCase()]={href:cap[2],title:cap[3]};continue}if(top&&(cap=this.rules.table.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(item);continue}if(top&&(cap=this.rules.paragraph.exec(src))){src=src.substring(cap[0].length);this.tokens.push({type:"paragraph",text:cap[1][cap[1].length-1]==="\n"?cap[1].slice(0,-1):cap[1]});continue}if(cap=this.rules.text.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"text",text:cap[0]});continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return this.tokens};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};inline._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/;inline._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;inline.link=replace(inline.link)("inside",inline._inside)("href",inline._href)();inline.reflink=replace(inline.reflink)("inside",inline._inside)();inline.normal=merge({},inline);inline.pedantic=merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});inline.gfm=merge({},inline.normal,{escape:replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(inline.text)("]|","~]|")("|","|https?://|")()});inline.breaks=merge({},inline.gfm,{br:replace(inline.br)("{2,}","*")(),text:replace(inline.gfm.text)("{2,}","*")()});function InlineLexer(links,options){this.options=options||marked.defaults;this.links=links;this.rules=inline.normal;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=inline.breaks}else{this.rules=inline.gfm}}else if(this.options.pedantic){this.rules=inline.pedantic}}InlineLexer.rules=inline;InlineLexer.output=function(src,links,options){var inline=new InlineLexer(links,options);return inline.output(src)};InlineLexer.prototype.output=function(src){var out="",link,text,href,cap;while(src){if(cap=this.rules.escape.exec(src)){src=src.substring(cap[0].length);out+=cap[1];continue}if(cap=this.rules.autolink.exec(src)){src=src.substring(cap[0].length);if(cap[2]==="@"){text=cap[1][6]===":"?this.mangle(cap[1].substring(7)):this.mangle(cap[1]);href=this.mangle("mailto:")+text}else{text=escape(cap[1]);href=text}out+='<a href="'+href+'">'+text+"</a>";continue}if(cap=this.rules.url.exec(src)){src=src.substring(cap[0].length);text=escape(cap[1]);href=text;out+='<a href="'+href+'">'+text+"</a>";continue}if(cap=this.rules.tag.exec(src)){src=src.substring(cap[0].length);out+=this.options.sanitize?escape(cap[0]):cap[0];continue}if(cap=this.rules.link.exec(src)){src=src.substring(cap[0].length);out+=this.outputLink(cap,{href:cap[2],title:cap[3]});continue}if((cap=this.rules.reflink.exec(src))||(cap=this.rules.nolink.exec(src))){src=src.substring(cap[0].length);link=(cap[2]||cap[1]).replace(/\s+/g," ");link=this.links[link.toLowerCase()];if(!link||!link.href){out+=cap[0][0];src=cap[0].substring(1)+src;continue}out+=this.outputLink(cap,link);continue}if(cap=this.rules.strong.exec(src)){src=src.substring(cap[0].length);out+="<strong>"+this.output(cap[2]||cap[1])+"</strong>";continue}if(cap=this.rules.em.exec(src)){src=src.substring(cap[0].length);out+="<em>"+this.output(cap[2]||cap[1])+"</em>";continue}if(cap=this.rules.code.exec(src)){src=src.substring(cap[0].length);out+="<code>"+escape(cap[2],true)+"</code>";continue}if(cap=this.rules.br.exec(src)){src=src.substring(cap[0].length);out+="<br>";continue}if(cap=this.rules.del.exec(src)){src=src.substring(cap[0].length);out+="<del>"+this.output(cap[1])+"</del>";continue}if(cap=this.rules.text.exec(src)){src=src.substring(cap[0].length);out+=escape(this.smartypants(cap[0]));continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return out};InlineLexer.prototype.outputLink=function(cap,link){if(cap[0][0]!=="!"){return'<a href="'+escape(link.href)+'"'+(link.title?' title="'+escape(link.title)+'"':"")+">"+this.output(cap[1])+"</a>"}else{return'<img src="'+escape(link.href)+'" alt="'+escape(cap[1])+'"'+(link.title?' title="'+escape(link.title)+'"':"")+">"}};InlineLexer.prototype.smartypants=function(text){if(!this.options.smartypants)return text;return text.replace(/--/g,"—").replace(/'([^']*)'/g,"‘$1’").replace(/"([^"]*)"/g,"“$1”").replace(/\.{3}/g,"…")};InlineLexer.prototype.mangle=function(text){var out="",l=text.length,i=0,ch;for(;i<l;i++){ch=text.charCodeAt(i);if(Math.random()>.5){ch="x"+ch.toString(16)}out+="&#"+ch+";"}return out};function Parser(options){this.tokens=[];this.token=null;this.options=options||marked.defaults}Parser.parse=function(src,options){var parser=new Parser(options);return parser.parse(src)};Parser.prototype.parse=function(src){this.inline=new InlineLexer(src.links,this.options);this.tokens=src.reverse();var out="";while(this.next()){out+=this.tok()}return out};Parser.prototype.next=function(){return this.token=this.tokens.pop()};Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};Parser.prototype.parseText=function(){var body=this.token.text;while(this.peek().type==="text"){body+="\n"+this.next().text}return this.inline.output(body)};Parser.prototype.tok=function(){switch(this.token.type){case"space":{return""}case"hr":{return"<hr>\n"}case"heading":{return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n"}case"code":{if(this.options.highlight){var code=this.options.highlight(this.token.text,this.token.lang);if(code!=null&&code!==this.token.text){this.token.escaped=true;this.token.text=code}}if(!this.token.escaped){this.token.text=escape(this.token.text,true)}return"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n"}case"table":{var body="",heading,i,row,cell,j;body+="<thead>\n<tr>\n";for(i=0;i<this.token.header.length;i++){heading=this.inline.output(this.token.header[i]);body+=this.token.align[i]?'<th align="'+this.token.align[i]+'">'+heading+"</th>\n":"<th>"+heading+"</th>\n"}body+="</tr>\n</thead>\n";body+="<tbody>\n";for(i=0;i<this.token.cells.length;i++){row=this.token.cells[i];body+="<tr>\n";for(j=0;j<row.length;j++){cell=this.inline.output(row[j]);body+=this.token.align[j]?'<td align="'+this.token.align[j]+'">'+cell+"</td>\n":"<td>"+cell+"</td>\n"}body+="</tr>\n"}body+="</tbody>\n";return"<table>\n"+body+"</table>\n"}case"blockquote_start":{var body="";while(this.next().type!=="blockquote_end"){body+=this.tok()}return"<blockquote>\n"+body+"</blockquote>\n"}case"list_start":{var type=this.token.ordered?"ol":"ul",body="";while(this.next().type!=="list_end"){body+=this.tok()}return"<"+type+">\n"+body+"</"+type+">\n"}case"list_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this.token.type==="text"?this.parseText():this.tok()}return"<li>"+body+"</li>\n"}case"loose_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this.tok()}return"<li>"+body+"</li>\n"}case"html":{return!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text}case"paragraph":{return"<p>"+this.inline.output(this.token.text)+"</p>\n"}case"text":{return"<p>"+this.parseText()+"</p>\n"}}};function escape(html,encode){return html.replace(!encode?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function replace(regex,opt){regex=regex.source;opt=opt||"";return function self(name,val){if(!name)return new RegExp(regex,opt);val=val.source||val;val=val.replace(/(^|[^\[])\^/g,"$1");regex=regex.replace(name,val);return self}}function noop(){}noop.exec=noop;function merge(obj){var i=1,target,key;for(;i<arguments.length;i++){target=arguments[i];for(key in target){if(Object.prototype.hasOwnProperty.call(target,key)){obj[key]=target[key]
}}}return obj}function marked(src,opt,callback){if(callback||typeof opt==="function"){if(!callback){callback=opt;opt=null}if(opt)opt=merge({},marked.defaults,opt);var highlight=opt.highlight,tokens,pending,i=0;try{tokens=Lexer.lex(src,opt)}catch(e){return callback(e)}pending=tokens.length;var done=function(hi){var out,err;if(hi!==true){delete opt.highlight}try{out=Parser.parse(tokens,opt)}catch(e){err=e}opt.highlight=highlight;return err?callback(err):callback(null,out)};if(!highlight||highlight.length<3){return done(true)}if(!pending)return done();for(;i<tokens.length;i++){!function(token){if(token.type!=="code"){return--pending||done()}return highlight(token.text,token.lang,function(err,code){if(code==null||code===token.text){return--pending||done()}token.text=code;token.escaped=true;--pending||done()})}(tokens[i])}return}try{if(opt)opt=merge({},marked.defaults,opt);return Parser.parse(Lexer.lex(src,opt),opt)}catch(e){e.message+="\nPlease report this to https://github.com/chjj/marked.";if((opt||marked.defaults).silent){return"<p>An error occured:</p><pre>"+escape(e.message+"",true)+"</pre>"}throw e}}marked.options=marked.setOptions=function(opt){merge(marked.defaults,opt);return marked};marked.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false};marked.Parser=Parser;marked.parser=Parser.parse;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.InlineLexer=InlineLexer;marked.inlineLexer=InlineLexer.output;marked.parse=marked;if(typeof exports==="object"){module.exports=marked}else if(typeof define==="function"&&define.amd){define(function(){return marked})}else{this.marked=marked}}.call(function(){return this||(typeof window!=="undefined"?window:global)}())}(self)},{}],11:[function(require,module,exports){!function(obj){if(typeof module!=="undefined")module.exports=obj;else window.vixen=obj}(function(){function trim(str){return String.prototype.trim.call(str)}function resolveProp(obj,name){return name.trim().split(".").reduce(function(p,prop){return p?p[prop]:undefined},obj)}function resolveChain(obj,chain){var prop=chain.shift();return chain.reduce(function(p,prop){var f=resolveProp(obj,prop);return f?f(p):p},resolveProp(obj,prop))}function bucket(b,k,v){if(!(k in b))b[k]=[];if(!(v in b[k]))b[k].push(v)}function extend(orig,obj){Object.keys(obj).forEach(function(prop){orig[prop]=obj[prop]});return orig}function traverseElements(el,callback){var i;if(callback(el)!==false){for(i=el.children.length;i--;)!function(node){traverseElements(node,callback)}(el.children[i])}}function createProxy(maps,proxy){proxy=proxy||{};proxy.extend=function(obj){var toRender={};Object.keys(obj).forEach(function(prop){maps.orig[prop]=obj[prop];if(maps.binds[prop])maps.binds[prop].forEach(function(renderId){if(renderId>=0)toRender[renderId]=true})});for(renderId in toRender)maps.renders[renderId](maps.orig);return proxy};Object.keys(maps.binds).forEach(function(prop){var ids=maps.binds[prop];Object.defineProperty(proxy,prop,{set:function(value){maps.orig[prop]=value;ids.forEach(function(renderId){if(renderId>=0)maps.renders[renderId](maps.orig)})},get:function(){if(maps.rebinds[prop])return maps.rebinds[prop]();return maps.orig[prop]}})});return proxy}return function(el,model){var pattern=/\{\{.+?\}\}/g,pipe="|";function resolve(orig,prop){if(!orig)return"";var val=resolveChain(orig,prop.slice(2,-2).split(pipe));return val===undefined?"":val}function strTmpl(str,orig){return str.replace(pattern,resolve.bind(undefined,orig))}function match(str){var m=str.match(pattern);if(m)return m.map(function(chain){return chain.slice(2,-2).split(pipe).map(trim)})}function traverse(el,orig){var binds={},rebinds={},renders={},count=0;orig=orig||{};function bindRenders(chains,renderId){chains.forEach(function(chain){bucket(binds,chain[0].split(".")[0],renderId)})}function parseIterator(el){var marker,prefix="",nodes=[];if(parent_=el.parentElement||el.parentNode){if(el.tagName==="FOR"){marker=el.ownerDocument.createTextNode("");parent_.replaceChild(marker,el)}else if(el.getAttribute("data-in")){prefix="data-";parent_=el;nodes=Array.prototype.slice.call(el.childNodes);marker=el.ownerDocument.createTextNode("");parent_.appendChild(marker)}else return;return{alias:el.getAttribute(prefix+"value"),key:el.getAttribute(prefix+"key"),prop:el.getAttribute(prefix+"in"),each:el.getAttribute(prefix+"each"),nodes:nodes,parent:parent_,marker:marker}}}function mapAttribute(owner,attr){var name,eventId,renderId,str,noTmpl;if((str=attr.value)&&(chains=match(str))){name=attr.name;if(name.indexOf("vx-")===0){owner.removeAttribute(name);name=name.substr(3)}if(name.indexOf("on")===0){renderId=-1;eventName=name.substr(2);chains.forEach(function(chain){owner.addEventListener(eventName,function(evt){return resolveProp(orig,chain[0])(evt,owner.value)})});owner.removeAttribute(name)}else{noTmpl=chains.length===1&&str.substr(0,1)==="{"&&str.substr(-1)==="}";renderId=count++;(renders[renderId]=function(orig,clear){var val=noTmpl?resolve(orig,str):strTmpl(str,orig);!clear&&name in owner?owner[name]=val:owner.setAttribute(name,val)})(orig,true);if(noTmpl)rebinds[chains[0][0]]=function(){return name in owner?owner[name]:owner.getAttribute(name)}}bindRenders(chains,renderId)}}function mapTextNodes(el){for(var i=el.childNodes.length;i--;)!function(node){var str,renderId,chains;if(node.nodeType===el.TEXT_NODE&&(str=node.nodeValue)&&(chains=match(str))){renderId=count++;(renders[renderId]=function(orig){node.nodeValue=strTmpl(str,orig)})(orig);bindRenders(chains,renderId)}}(el.childNodes[i])}el.removeAttribute("data-subview");traverseElements(el,function(el_){var i,iter,template,nodes,renderId;if(el_.getAttribute("data-subview")!==null)return false;if(iter=parseIterator(el_)){nodes=iter.nodes;template=el_.cloneNode(true);maps=traverse(template.cloneNode(true));renderId=count++;(renders[renderId]=function(orig){var list=resolveProp(orig,iter.prop),each_=iter.each&&resolveProp(orig,iter.each),i;for(i=nodes.length;i--;)iter.parent.removeChild(nodes[i]);nodes=[];for(i in list)if(list.hasOwnProperty(i))!function(value,i){var orig_=extend({},orig),clone=template.cloneNode(true),lastNode=iter.marker,maps,renderId,i_,node,nodes_=[];if(iter.key)orig_[iter.key]=i;orig_[iter.alias]=value;maps=traverse(clone,orig_);for(i_=clone.childNodes.length;i_--;lastNode=node){nodes_.push(node=clone.childNodes[i_]);iter.parent.insertBefore(node,lastNode)}if(each_&&each_(value,i,orig_,nodes_.filter(function(n){return n.nodeType===el_.ELEMENT_NODE}))!=null){for(i_=nodes_.length;i_--;)iter.parent.removeChild(nodes_[i_])}else{nodes=nodes.concat(nodes_)}}(list[i],i)})(orig);bucket(binds,iter.prop.split(".")[0],renderId);for(p in maps.binds)if(iter.alias.indexOf(p)===-1)bucket(binds,p,renderId)}else{mapTextNodes(el_)}if(el_.tagName!=="FOR")for(i=el_.attributes.length;i--;)mapAttribute(el_,el_.attributes[i]);return!iter});return{orig:orig,binds:binds,rebinds:rebinds,renders:renders}}return createProxy(traverse(el,model&&extend({},model)),model)}}())},{}]},{},[2]);